{% extends 'default.html.twig' %}
{% block title %}{{ 'Notfall-ID Pass'|trans }}{% endblock %}

{# Content #}
{% block content %}

  {# Intro #}
  <div class="container">
    <div class="row mt-3 justify-content-center">
      <div class="col-12 col-md-10 col-lg-8 border">

        <div class="row py-3 bg-green">
          <div class="col-12">

            <h1 class="text-light">{{ item.idNo }}</h1>
                    {{ item.id }}

          </div>
        </div>

        {# last change #}
        <div class="row py-3 bg-dark">
          <div class="col-12 text-center text-light">
            <span>{{ 'person.last_change_datum'|trans }}: {{ person.lastChangeDatum|date('d.m.Y') }}</span>
          </div>
        </div>

        {# name #}
        <div class="row py-3">
          <div class="col-12">
            <table class="table table-sm">
              <tr>
                <td colspan="2">
                  <strong class="text-success">{{ person.vorname|raw }} {{ person.nachname|raw }}</strong>
                </td>
              </tr>
              <tr>
                <td colspan="2">
                  <span class="text-success">* {{ person.dateOfBirth|date('d.m.Y') }} ({{ person.age }})</span>
                </td>
              </tr>
              {% if person.groesseShow == true %}
                <tr>
                  <td>{{ 'person.groesse'|trans }}</td>
                  <td>
                    <span>{{ person.groesse }}{{ person.groesseEinheit }}</span>
                  </td>
                </tr>
              {% endif %}
              {% if person.gewichtShow == true %}
                <tr>
                  <td>{{ 'person.gewicht'|trans }}</td>
                  <td>
                    <span>{{ person.gewicht }}{{ person.gewichtEinheit }}</span>
                  </td>
                </tr>
              {% endif %}
              <tr>
                <td class="col-4">{{ 'person.geschlecht'|trans }}</td>
                <td>
                  <span>{{ ('person.geschlecht.' ~ person.anrede)|trans }}</span>
                </td>
              </tr>
            </table>
          </div>
        </div>

        {# actions #}
        <div class="row mb-3">
          <div class="col-6 text-center">
            <button
              class="btn btn-outline-dark text-success px-4 py-2">
              <i class="bi bi-geo-alt-fill"></i>
              <span class="ps-1">{{ 'Standort'|trans }}</span>
            </button>
          </div>
          <div class="col-6 text-center">
            <a
              class="btn btn-outline-dark text-success px-4 py-2"
              href="tel:112">
              <i class="bi bi-telephone-fill"></i>
              <span class="ps-1">{{ 'Notruf'|trans }}</span>
            </a>
          </div>
        </div>

        {# infos #}
        {% if person.medicalShow == true %}
          <div class="row py-3 bg-dark">
            <div class="col-12 text-light">

              {# blood #}
              {% if person.blutgruppeShow == true and person.blutgruppe is not empty %}
                <div class="mx-4 my-3 p-3 border border-light">
                  <strong>{{ 'Blutgruppe'|trans }}</strong><br />
                  {{ person.blutgruppe }}
                </div>
              {% endif %}

              {# blood #}
              {% if person.erkrankungenShow == true and person.erkrankungen is not empty %}
                <div class="mx-4 my-3 p-3 border border-light">
                  <strong>{{ 'Erkrankungen'|trans }}</strong><br />
                  {{ person.erkrankungen|raw|nl2br }}
                </div>
              {% endif %}

              {# blood #}
              {% if person.medikamenteShow == true and person.medikamente is not empty %}
                <div class="mx-4 my-3 p-3 border border-light">
                  <strong>{{ 'Medikamente'|trans }}</strong><br />
                  {{ person.medikamente|raw|nl2br }}
                </div>
              {% endif %}

              {# blood #}
              {% if person.allergieenShow == true and person.allergieen is not empty %}
                <div class="mx-4 my-3 p-3 border border-light">
                  <strong>{{ 'Allergieen'|trans }}</strong><br />
                  {{ person.allergieen|raw|nl2br }}
                </div>
              {% endif %}
            </div>
          </div>
        {% endif %}

        {# contacts #}
        {% if person.contacts|length > 0 %}
          <div class="row mb-3">
            <div class="col-12">
              <ul class="list-group list-group-flush px-4">
                {% for contact in person.contacts %}
                <li class="list-group-item">
                  <div class="py-2">
                    <div class="float-start">
                      {{ contact.entry|join('<br />')|raw }}
                    </div>

                    {% if contact.entry.phone is defined and contact.entry.phone is not empty %}
                      <div class="float-end">
                        <a
                          class="btn btn-outline-dark text-success px-4 py-2"
                          href="tel:{{ contact.entry.phone }}">
                          <i class="bi bi-telephone-fill"></i>
                          <span class="ps-1">{{ 'Anrufen'|trans }}</span>
                        </a>
                      </div>
                    {% endif %}
                  </div>
                </li>
              {% endfor %}
            </div>
          </div>
        {% endif %}

      </div>
    </div>
  </div>
{% endblock %}