{% extends 'default.html.twig' %}
{% block title %}{{ 'Start'|trans }}{% endblock %}

{# preloads #}
{% block preloads %}
  {% apply spaceless %}

  {# banner_images | preload #}
  {% for item in settings.carousel %}
    <link
      rel="preload"
      href="{{ asset(item.image.mobile, 'media') }}"
      as="image" />
		<link
      rel="preload"
      href="{{ asset(item.image.desktop, 'media') }}"
      as="image" />
  {% endfor %}

  {% endapply %}
{% endblock %}

{# Content #}
{% block content %}

	{# Carousel #}
	<div
		id="carousel-index"
		class="carousel slide"
		data-bs-ride="true">
		<div class="carousel-indicators">
			{% for item in settings.carousel %}
				<button
					type="button"
					data-bs-target="#carousel-index"
					data-bs-slide-to="{{ loop.index0 }}"
					class="d-none d-lg-block{{ loop.index0 == 0 ? ' active' : '' }}"
					aria-current="{{ loop.index0 == 0 ? 'true' : 'false' }}"
					aria-label="Slide {{ loop.index }}"></button>
			{% endfor %}
		</div>
		<div class="carousel-inner">
			{% for key, item in settings.carousel %}
				{% set text = 'index.carousel.slide.' ~ key ~ '.text' %}
				{% set caption = 'index.carousel.slide.' ~ key ~ '.caption' %}
				{% set textStyle = item.textStyle is defined ? item.textStyle : 'position:absolute;' %}
				{% set textStyleProperty = 'style="' ~ textStyle ~ '"' %}
				<div class="carousel-item{{ loop.index0 == 0 ? ' active' : '' }}">
					<img
						src="{{ asset(item.image.desktop, 'media') }}"
						class="d-none d-lg-block w-100"
						alt="{{ caption|trans }}" />
					<div class="d-none d-lg-block text-white" {{ textStyleProperty|raw }}>
						<h2 class="h1" >{{ text|trans|raw|markdown_to_html }}</h2>
					</div>
					<img
						src="{{ asset(item.image.mobile, 'media') }}"
						class="d-lg-none w-100"
						alt="{{ caption |trans}}" />
					<div class="carousel-caption pb-0 d-lg-none">
						<span class="align-bottom">{{ caption|trans }}</span>
					</div>
				</div>
			{% endfor %}
		</div>
		<button
			class="carousel-control-prev"
			type="button"
			data-bs-target="#carousel-index"
			data-bs-slide="prev">
			<span class="carousel-control-prev-icon" aria-hidden="true"></span>
			<span class="visually-hidden">{{ 'Vorherige'|trans }}</span>
		</button>
		<button
			class="carousel-control-next"
			type="button"
			data-bs-target="#carousel-index"
			data-bs-slide="next">
			<span class="carousel-control-next-icon" aria-hidden="true"></span>
			<span class="visually-hidden">{{ 'NÃ¤chste'|trans }}</span>
		</button>
	</div>

	{# Intro #}
	<div class="container-fluid">
		<div class="row mt-3">
			<div class="col-md-12">
				<h1 class="text-center text-success">SOS-ID-Chip</h1>
				<h5 class="text-center text-success">{{ 'index.introduction.header2'|trans }}</h5>
			</div>
		</div>
		<div class="row">
			<div class="col-12 col-lg-10 offset-lg-1 text-center">
				<p class="">{{ 'index.introduction1'|trans|raw|markdown_to_html }}</p>
		</div>
	</div>

	{# Box row 1 #}
	<div class="container-fluid">
		<div class="row mt-3 row-cols-1 row-cols-md-2 row-cols-lg-4 g-3">
			{% for key, card in settings.cards.row1 %}
				{% set labelHeader = 'index.boxrow1.' ~ key ~ '.header' %}
				{% set labelText = 'index.boxrow1.' ~ key ~ '.text' %}
				<div class="col">
					<div class="card text-center h-100">
						<div class="py-3">
							<a
								href="{{ card.href }}"
								target="{{ card.target ?? '_top' }}">
								<img
									src="{{ asset(card.image, 'media') }}"
									height="80"
									alt="{{ labelHeader|trans|raw }}" />
							</a>
						</div>
						<div class="card-body">
							<h3 class="text-center text-success">{{ labelHeader|trans|raw }}</h3>
							<p class="card-text">{{ labelText|trans|raw|markdown_to_html }}</p>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>

	{# Box row 2 #}
	<div class="row mt-3 py-4 gy-3 bg-green">
		{% for key, card in settings.cards.row2 %}
			{% set labelHeader = 'index.boxrow2.' ~ key ~ '.header' %}
			<div class="col-12 col-md-6 col-xl-3">
				<div class="text-center">
					<h3 class="text-center text-light">{{ labelHeader|trans }}</h3>
					<div class="py-3">
						<img
							src="{{ asset(card.image, 'media') }}"
							class="img-fluid border border-dark"
							style="max-width:300px;"
							alt="{{ labelHeader|trans }}" />
					</div>
				</div>
			</div>
		{% endfor %}
	</div>

	{# about #}
	<a name="{{ settings.menu.header.idno.about.anchor }}" />
	<div class="container-fluid">
		<div class="row mt-3 gy-3">
			<div class="col-lg-1">
				<img
					src="{{ asset(settings.cards.row1.about.image, 'media') }}"
					class="img-fluid"
					width="85"
					alt="{{ 'index.boxrow1.about.header'|trans }}" />
			</div>
			<div class="col-lg-2 text-lg-end">
				<h3 class="text-success">{{ 'index.boxrow1.about.header'|trans|raw }}</h3>
			</div>
			<div class="col-lg-9">
				{{ 'index.about.text'|trans|raw|markdown_to_html }}
			</div>
		</div>
	</div>

	{# features #}
	<a name="features" />
	<div class="row mt-3 bg-green">
		<div class="container-fluid">
			<div class="row my-3 gy-3">
				<div class="col-lg-1">
					<img
						src="{{ asset('images/vorteile_2b.png', 'media') }}"
						class="img-fluid"
						width="85"
						alt="{{ 'index.features.header'|trans }}" />
				</div>
				<div class="col-lg-2 text-lg-end">
					<h3 class="text-light">{{ 'index.features.header'|trans }}</h3>
				</div>
				<div class="col-lg-9">
					{% for i in 1..6 %}
						<div class="d-flex align-items-center mb-3">
							<div class="flex-shrink-0">
								<img
									src="{{ asset('images/vorteil_pic.png', 'media') }}"
									class="img-fluid"
									alt="{{ 'index.features.header'|trans }}" />
							</div>
							<div class="flex-grow-1 ms-3">
								<strong>{{ ('index.feature.' ~ loop.index ~ '.lbl')|trans }}</strong>
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		</div>
	</div>

	{# works #}
	<a name="{{ settings.menu.header.idno.works.anchor }}" />
	<div class="container-fluid">
		<div class="row mt-3 gy-3">
			<div class="col-lg-1">
				<img
					src="{{ asset(settings.cards.row1.works.image, 'media') }}"
					class="img-fluid"
					width="85"
					alt="{{ 'index.works.header'|trans }}" />
			</div>
			<div class="col-lg-2 text-lg-end">
				<h3 class="text-success">{{ 'index.works.header'|trans|raw }}</h3>
			</div>
			<div class="col-lg-9">
				<div class="row row-cols-1 row-cols-md-3 g-3">
					{% for i in 1..3 %}
						{% set labelHeader = 'index.work.step' ~ i ~ '.header' %}
						{% set labelText = 'index.work.step' ~ i ~ '.text' %}
						<div class="col">
							<div class="card h-100">
								<div class="card-body">
									<h3 class="text-success card-title">{{ labelHeader|trans }}</h3>
									<p class="card-text">{{ labelText|trans|raw|markdown_to_html }}</p>
								</div>
								<img
									src="{{ asset('images/so_funktionierts_' ~ i ~ '.jpg', 'media') }}"
									class="card-img-bottom img-fluid borderX border-dark"
									alt="{{ labelHeader|trans }}" />
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		</div>
	</div>

	{# references #}
	<a name="{{ settings.menu.header.idno.references.anchor }}" />
	<div class="row mt-3 bg-green">
		<div class="container-fluid">
			<div class="row mt-3 gy-3">
				<div class="col-lg-1">
					<img
						src="{{ asset('images/icon_referenzen_white.png', 'media') }}"
						class="img-fluid"
						width="85"
						alt="{{ 'index.references.header'|trans }}" />
				</div>
				<div class="col-lg-2 text-lg-end">
					<h3 class="text-light">{{ 'index.references.header'|trans|raw }}</h3>
				</div>
				<div class="col-md-9"></div>
			</div>
			<div class="row mb-5">
				<div class="col-10 offset-1 col-lg-8 offset-lg-2 bg-light">
					<div class="row justify-content-center">
						{% for key, ref in settings.references %}
							<div class="col-12 col-md-6 col-lg-4 text-center">
								<img
									src="{{ asset(ref.logo, 'media') }}"
									class="img-fluid p-3 ref-logo"
									alt="{{ key }}" />
							</div>
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
	</div>

{% endblock %}